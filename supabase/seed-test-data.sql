-- ============================================
-- TEST DATA SEED SCRIPT
-- ============================================
-- Creates fake players and votes for testing
-- Run this in Supabase SQL Editor
-- ============================================

-- NOTE: This creates fake auth.users records
-- Only use this in development/testing!
-- These users won't be able to sign in (no OAuth data)

-- 1. CREATE TEST AUTH USERS
-- Insert into auth.users table (Supabase manages this)
insert into auth.users (
  id,
  instance_id,
  aud,
  role,
  email,
  encrypted_password,
  email_confirmed_at,
  created_at,
  updated_at,
  raw_app_meta_data,
  raw_user_meta_data,
  is_super_admin,
  confirmation_token,
  email_change,
  email_change_token_new,
  recovery_token
) values
  ('11111111-1111-1111-1111-111111111111', '00000000-0000-0000-0000-000000000000', 'authenticated', 'authenticated', 'alice@test.local', '', now(), now(), now(), '{"provider":"email","providers":["email"]}', '{"full_name":"Alice"}', false, '', '', '', ''),
  ('22222222-2222-2222-2222-222222222222', '00000000-0000-0000-0000-000000000000', 'authenticated', 'authenticated', 'bob@test.local', '', now(), now(), now(), '{"provider":"email","providers":["email"]}', '{"full_name":"Bob"}', false, '', '', '', ''),
  ('33333333-3333-3333-3333-333333333333', '00000000-0000-0000-0000-000000000000', 'authenticated', 'authenticated', 'charlie@test.local', '', now(), now(), now(), '{"provider":"email","providers":["email"]}', '{"full_name":"Charlie"}', false, '', '', '', ''),
  ('44444444-4444-4444-4444-444444444444', '00000000-0000-0000-0000-000000000000', 'authenticated', 'authenticated', 'diana@test.local', '', now(), now(), now(), '{"provider":"email","providers":["email"]}', '{"full_name":"Diana"}', false, '', '', '', ''),
  ('55555555-5555-5555-5555-555555555555', '00000000-0000-0000-0000-000000000000', 'authenticated', 'authenticated', 'eve@test.local', '', now(), now(), now(), '{"provider":"email","providers":["email"]}', '{"full_name":"Eve"}', false, '', '', '', ''),
  ('66666666-6666-6666-6666-666666666666', '00000000-0000-0000-0000-000000000000', 'authenticated', 'authenticated', 'frank@test.local', '', now(), now(), now(), '{"provider":"email","providers":["email"]}', '{"full_name":"Frank"}', false, '', '', '', ''),
  ('77777777-7777-7777-7777-777777777777', '00000000-0000-0000-0000-000000000000', 'authenticated', 'authenticated', 'grace@test.local', '', now(), now(), now(), '{"provider":"email","providers":["email"]}', '{"full_name":"Grace"}', false, '', '', '', ''),
  ('88888888-8888-8888-8888-888888888888', '00000000-0000-0000-0000-000000000000', 'authenticated', 'authenticated', 'henry@test.local', '', now(), now(), now(), '{"provider":"email","providers":["email"]}', '{"full_name":"Henry"}', false, '', '', '', '')
on conflict (id) do nothing;

-- 2. CREATE TEST PLAYERS
-- Now that auth.users exist, we can create players
insert into public.players (user_id, discord_id, display_name, custom_name, avatar_url) values
  ('11111111-1111-1111-1111-111111111111', 'test001', 'Alice', 'Pro Alice', null),
  ('22222222-2222-2222-2222-222222222222', 'test002', 'Bob', null, null),
  ('33333333-3333-3333-3333-333333333333', 'test003', 'Charlie', 'Chuck', null),
  ('44444444-4444-4444-4444-444444444444', 'test004', 'Diana', null, null),
  ('55555555-5555-5555-5555-555555555555', 'test005', 'Eve', 'E-Money', null),
  ('66666666-6666-6666-6666-666666666666', 'test006', 'Frank', null, null),
  ('77777777-7777-7777-7777-777777777777', 'test007', 'Grace', 'Amazing Grace', null),
  ('88888888-8888-8888-8888-888888888888', 'test008', 'Henry', null, null)
on conflict (user_id) do nothing;

-- 3. CREATE SOME TEST VOTES
-- Each player votes for a few others (realistic scenario)
insert into public.votes (voter_id, target_id, score) values
  -- Alice's votes
  ('11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', 8.50),
  ('11111111-1111-1111-1111-111111111111', '33333333-3333-3333-3333-333333333333', 7.25),
  ('11111111-1111-1111-1111-111111111111', '44444444-4444-4444-4444-444444444444', 9.00),
  ('11111111-1111-1111-1111-111111111111', '55555555-5555-5555-5555-555555555555', 6.75),
  
  -- Bob's votes
  ('22222222-2222-2222-2222-222222222222', '11111111-1111-1111-1111-111111111111', 9.50),
  ('22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', 6.00),
  ('22222222-2222-2222-2222-222222222222', '55555555-5555-5555-5555-555555555555', 7.50),
  ('22222222-2222-2222-2222-222222222222', '77777777-7777-7777-7777-777777777777', 8.25),
  
  -- Charlie's votes
  ('33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', 8.00),
  ('33333333-3333-3333-3333-333333333333', '22222222-2222-2222-2222-222222222222', 7.75),
  ('33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444', 5.50),
  ('33333333-3333-3333-3333-333333333333', '88888888-8888-8888-8888-888888888888', 6.25),
  
  -- Diana's votes
  ('44444444-4444-4444-4444-444444444444', '11111111-1111-1111-1111-111111111111', 9.25),
  ('44444444-4444-4444-4444-444444444444', '22222222-2222-2222-2222-222222222222', 8.75),
  ('44444444-4444-4444-4444-444444444444', '55555555-5555-5555-5555-555555555555', 7.00),
  
  -- Eve's votes
  ('55555555-5555-5555-5555-555555555555', '11111111-1111-1111-1111-111111111111', 8.50),
  ('55555555-5555-5555-5555-555555555555', '33333333-3333-3333-3333-333333333333', 7.25),
  ('55555555-5555-5555-5555-555555555555', '66666666-6666-6666-6666-666666666666', 6.50),
  ('55555555-5555-5555-5555-555555555555', '77777777-7777-7777-7777-777777777777', 9.00),
  
  -- Frank's votes
  ('66666666-6666-6666-6666-666666666666', '22222222-2222-2222-2222-222222222222', 7.50),
  ('66666666-6666-6666-6666-666666666666', '44444444-4444-4444-4444-444444444444', 8.25),
  ('66666666-6666-6666-6666-666666666666', '77777777-7777-7777-7777-777777777777', 8.75),
  
  -- Grace's votes
  ('77777777-7777-7777-7777-777777777777', '11111111-1111-1111-1111-111111111111', 9.75),
  ('77777777-7777-7777-7777-777777777777', '22222222-2222-2222-2222-222222222222', 8.00),
  ('77777777-7777-7777-7777-777777777777', '33333333-3333-3333-3333-333333333333', 7.50),
  ('77777777-7777-7777-7777-777777777777', '55555555-5555-5555-5555-555555555555', 8.50),
  
  -- Henry's votes
  ('88888888-8888-8888-8888-888888888888', '11111111-1111-1111-1111-111111111111', 8.25),
  ('88888888-8888-8888-8888-888888888888', '33333333-3333-3333-3333-333333333333', 6.75),
  ('88888888-8888-8888-8888-888888888888', '66666666-6666-6666-6666-666666666666', 7.00)
on conflict (voter_id, target_id) do nothing;

-- ============================================
-- DONE! You now have 8 test players with ~30 votes
-- ============================================
-- To see them:
-- SELECT * FROM player_ratings ORDER BY avg_score DESC;
--
-- To clean up:
-- See cleanup-test-data.sql
-- ============================================

